machine:
  xcode:
    version: 8.2

checkout:
  post:
    # workaround for known git bug where attempting to fetch a missing commit fails early on the first try
    - git submodule update --init --recursive || true
    - git submodule sync --recursive
    - git submodule deinit -f .
    - git submodule update --init --recursive --force

dependencies:
  pre:
    - sudo -H easy_install pip
    - sudo -H pip install empy jinja2

test:
  override:
    - make tests
